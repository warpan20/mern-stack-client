(this["webpackJsonpmern-stack-client"]=this["webpackJsonpmern-stack-client"]||[]).push([[0],{66:function(e,t,a){e.exports=a(95)},71:function(e,t,a){},72:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),s=a.n(c),i=(a(71),a(72),a(26)),o=a(23),l=a(2),u=a(30),m=a.n(u),f="https://mern-stack-api-warpan.herokuapp.com/",d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f+"postmessages/";return{fetchAll:function(){return m.a.get(e)},fetchById:function(t){return m.a.get(e+t)},create:function(t){return m.a.post(e,t)},update:function(t,a){return m.a.put(e+t,a)},delete:function(t){return m.a.delete(e+t)}}},p="CREATE",g="UPDATE",E="DELETE",h="FETCH_ALL",b=a(127),v=a(96),O=a(124),j=a(128),y=a(129),C=a(36),M=a(125),P=a(130),x=a(4),I=a(16),T=a(133),_=a(10),S=function(e,t){var a=Object(n.useState)(e),r=Object(o.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)({}),l=Object(o.a)(i,2),u=l[0],m=l[1];return{values:c,setValues:s,errors:u,setErrors:m,handleInputChange:function(e){var t=e.target,a=t.name,n=t.value;s(Object(I.a)({},c,Object(_.a)({},a,n)))},resetForm:function(){s(e),m({}),t(0)}}},k=a(14),w=a.n(k),A=a(120),L={title:"",message:""},B={createPostMessage:function(e,t){return function(a){d().create(e).then((function(e){a({type:p,payload:e.data}),t()})).catch((function(e){return console.log(e)}))}},updatePostMessage:function(e,t,a){return function(n){d().update(e,t).then((function(e){n({type:g,payload:e.data}),a()})).catch((function(e){return console.log(e)}))}}},D=Object(i.b)((function(e){return{postMessageList:e.postMessage.list}}),B)(Object(x.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1)}},form:{display:"flex",flexWrap:"wrap",justifyContent:"center"},postBtn:{width:"50%"}}}))((function(e){var t=e.classes,a=Object(l.a)(e,["classes"]);Object(n.useEffect)((function(){0!=a.currentId&&(i(Object(I.a)({},a.postMessageList.find((function(e){return e._id==a.currentId})))),u({}))}),[a.currentId]);var c=S(L,a.setCurrentId),s=c.values,i=c.setValues,o=c.errors,u=c.setErrors,m=c.handleInputChange,f=c.resetForm;return r.a.createElement("form",{autoComplete:"off",noValidate:!0,className:"".concat(t.root," ").concat(t.form),onSubmit:function(e){e.preventDefault();var t=function(){w.a.raise({content:r.a.createElement(k.Cinnamon.Crisp,{title:"Post Box",content:"Submitted successfully",scheme:k.Cinnamon.Crisp.SCHEME_PURPLE,icon:r.a.createElement(A.a,null)})}),f()};(function(){var e=Object(I.a)({},o);return e.title=s.title?"":"This field is required.",e.message=s.message?"":"This field is required.",u(Object(I.a)({},e)),Object.values(e).every((function(e){return""==e}))})()&&(0==a.currentId?a.createPostMessage(s,t):a.updatePostMessage(a.currentId,s,t))}},r.a.createElement(T.a,Object.assign({name:"title",variant:"outlined",label:"Title",fullWidth:!0,value:s.title,onChange:m},o.title&&{error:!0,helperText:o.title})),r.a.createElement(T.a,Object.assign({name:"message",variant:"outlined",label:"Message",fullWidth:!0,multiline:!0,rows:4,value:s.message,onChange:m},o.message&&{error:!0,helperText:o.message})),r.a.createElement(M.a,{variant:"contained",color:"primary",size:"large",type:"submit",className:t.postBtn},"Submit"))}))),N=a(126),F={fetchAllPostMessages:function(){return function(e){d().fetchAll().then((function(t){e({type:h,payload:t.data})})).catch((function(e){return console.log(e)}))}},deletePostMessage:function(e,t){return function(a){d().delete(e).then((function(n){a({type:E,payload:e}),t()})).catch((function(e){return console.log(e)}))}}},z=Object(i.b)((function(e){return{postMessageList:e.postMessage.list}}),F)(Object(x.a)((function(e){return{paper:{margin:e.spacing(3),padding:e.spacing(2)},smMargin:{margin:e.spacing(1)},actionDiv:{textAlign:"center"}}}))((function(e){var t=e.classes,a=Object(l.a)(e,["classes"]),c=Object(n.useState)(0),s=Object(o.a)(c,2),i=s[0],u=s[1];Object(n.useEffect)((function(){a.fetchAllPostMessages()}),[]);return r.a.createElement(b.a,{container:!0},r.a.createElement(b.a,{item:!0,xs:5},r.a.createElement(v.a,{className:t.paper},r.a.createElement(D,{currentId:i,setCurrentId:u}))),r.a.createElement(b.a,{item:!0,xs:7},r.a.createElement(v.a,{className:t.paper},r.a.createElement(O.a,null,a.postMessageList.map((function(e,c){return r.a.createElement(n.Fragment,{key:c},r.a.createElement(j.a,null,r.a.createElement(y.a,null,r.a.createElement(C.a,{variant:"h5"},e.title),r.a.createElement("div",null,e.message),r.a.createElement("div",{className:t.actionDiv},r.a.createElement(M.a,{variant:"contained",color:"primary",size:"small",className:t.smMargin,onClick:function(){return u(e._id)}},"Edit"),r.a.createElement(M.a,{variant:"contained",color:"secondary",size:"small",className:t.smMargin,onClick:function(){return t=e._id,void(window.confirm("Are you sure to delete this record?")&&a.deletePostMessage(t,(function(){w.a.raise({content:r.a.createElement(k.Cinnamon.Crisp,{title:"Post Box",content:"Deleted successfully",scheme:k.Cinnamon.Crisp.SCHEME_PURPLE,icon:r.a.createElement(N.a,null)})})})));var t}},"Delete")))),r.a.createElement(P.a,{component:"li"}))}))))))}))),H=a(19),R=a(55),W=a(15),U={list:[]},V=Object(H.c)({postMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(I.a)({},e,{list:Object(W.a)(t.payload)});case p:return Object(I.a)({},e,{list:[].concat(Object(W.a)(e.list),[t.payload])});case g:return Object(I.a)({},e,{list:e.list.map((function(e){return e._id==t.payload._id?t.payload:e}))});case E:return Object(I.a)({},e,{list:e.list.filter((function(e){return e._id!=t.payload}))});default:return e}}}),q=Object(H.e)(V,Object(H.d)(Object(H.a)(R.a))),J=a(131),G=a(132);var K=function(){return r.a.createElement(i.a,{store:q},r.a.createElement(J.a,{maxWidth:"lg"},r.a.createElement(G.a,{position:"static",color:"inherit"},r.a.createElement(C.a,{variant:"h2",align:"center"},"Post Box")),r.a.createElement(z,null),r.a.createElement(w.a,{position:{vertical:k.POS_TOP,horizontal:k.POS_RIGHT}})))};s.a.render(r.a.createElement(K,null),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.6d5fb63e.chunk.js.map